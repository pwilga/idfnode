menu "IDF-node Application Configuration"

    config BOARD_STATUS_LED_GPIO
        int "Status LED GPIO"
        default 2
        range 0 39
        help
            GPIO number for the status LED. Set to -1 to disable.
            Indicates device status (booting, WiFi connection, errors, etc.)

    config SUPERVISOR_QUEUE_LENGTH
        int "Supervisor command queue length"
        default 8
        range 1 20
        help
            Length of the supervisor command queue.
            Typical: 8.

    config MAX_COMMANDS
        int "Maximum number of commands"
        default 20
        range 1 100
        help
            Maximum number of commands that can be queued for execution.

    config MAX_TELE
        int "Maximum number of telemetry appenders"
        default 20
        range 1 100
        help
            Maximum number of telemetry appenders that can be registered.

    config WIFI_AP_INACTIVITY_TIMEOUT_MINUTES
        int "WiFi AP inactivity timeout (minutes)"
        default 1
        range 1 60
        help
            Timeout in minutes before disabling AP if no clients are connected.

    config WIFI_STA_RETRY_INITIAL_MS
        int "WiFi STA retry initial interval (ms)"
        default 60000
        range 1000 600000
        help
            Initial delay before retrying WiFi STA connection after a burst of failed attempts.
            Used for exponential backoff. Typical: 60000 (1 min).

    config WIFI_STA_RETRY_MAX_MS
        int "WiFi STA retry maximum interval (ms)"
        default 600000
        range 1000 3600000
        help
            Maximum delay between WiFi STA connection retry bursts (exponential backoff upper limit).
            Typical: 600000 (10 min).

    config WIFI_STA_BURST_RETRY_COUNT
        int "WiFi STA burst retry count"
        default 5
        range 1 20
        help
            Number of immediate retry attempts in a burst before increasing the retry interval.
            Typical: 5.

    config WIFI_STA_BURST_RETRY_DELAY_MS
        int "WiFi STA burst retry delay (ms)"
        default 5000
        range 100 60000
        help
            Delay between individual attempts within a burst of WiFi STA connection retries.
            Typical: 5000 (5 sec).


    config MQTT_TELEMETRY_INTERVAL_MS
        int "Telemetry interval (ms)"
        default 5000
        range 1000 60000
        help
            Interval for publishing telemetry data.
            Typical: 5000 (5 sec).

    config MQTT_RX_BUFFER_SIZE
        int "MQTT RX buffer size"
        default 1024
        range 256 8192
        help
            Size of the MQTT receive buffer.
            Typical: 1024.

    config MQTT_QOS
        int "MQTT Quality of Service"
        default 0
        range 0 2
        help
            MQTT Quality of Service level.
            0: At most once (fire and forget)
            1: At least once (acknowledged)
            2: Exactly once (guaranteed delivery)

    menuconfig MQTT_ENABLE
        bool "Enable MQTT"
        default y
        help
            Enable or disable MQTT functionality in the application.
            When disabled, MQTT will not be initialized or used.

    menuconfig HOME_ASSISTANT_MQTT_DISCOVERY_ENABLE
        bool "Enable Home Assistant MQTT Discovery"
        default y
        depends on MQTT_ENABLE
        help
            Enable automatic MQTT discovery for Home Assistant.

            Publishes device configuration to discovery topics, allowing
            Home Assistant to detect and add entities automatically.

            Requires a working MQTT connection.

    menu "Tasks configuration"

        config SUPERVISOR_TASK_STACK_SIZE
            int "Supervisor task stack size"
            default 4096

        config SUPERVISOR_TASK_PRIORITY
            int "Supervisor task priority"
            default 5

        if MQTT_ENABLE
            config MQTT_COMMAND_TASK_STACK_SIZE
                int "MQTT command task stack size"
                default 4096

            config MQTT_COMMAND_TASK_PRIORITY
                int "MQTT command task priority"
                default 10

            config MQTT_TELEMETRY_TASK_STACK_SIZE
                int "MQTT telemetry task stack size"
                default 4096

            config MQTT_TELEMETRY_TASK_PRIORITY
                int "MQTT telemetry task priority"
                default 5
        endif

        config TCP_OTA_TASK_STACK_SIZE
            int "TCP OTA task stack size"
            default 8192

        config TCP_OTA_TASK_PRIORITY
            int "TCP OTA task priority"
            default 0

        config UDP_MONITOR_TASK_STACK_SIZE
            int "UDP monitor task stack size"
            default 4096

        config UDP_MONITOR_TASK_PRIORITY
            int "UDP monitor task priority"
            default 5

        config WIFI_STA_CONNECTION_TASK_STACK_SIZE
            int "WiFi STA connection task stack size"
            default 2048
            range 1024 8192
            help
                Stack size (in bytes) for the WiFi STA connection management task.
                Typical: 2048.

        config WIFI_STA_CONNECTION_TASK_PRIORITY
            int "WiFi STA connection task priority"
            default 1
            range 0 10
            help
                Priority for the WiFi STA connection management task.
                Typical: 1.

        config WIFI_AP_TIMEOUT_TASK_STACK_SIZE
            int "WiFi AP timeout task stack size"
            default 3072
            range 1024 8192
            help
                Stack size (in bytes) for the WiFi AP timeout management task.
                Typical: 3072.

        config WIFI_AP_TIMEOUT_TASK_PRIORITY
            int "WiFi AP timeout task priority"
            default 1
            range 0 10
            help
                Priority for the WiFi AP timeout management task.
                Typical: 1.

    endmenu

endmenu  # IDF-node Application Configuration
